---
title: 深入理解计算机系统读书笔记
description: 从程序员的角度出发, 讲述应用程序员如何能够利用系统知识来编写出更好的程序
categories:
 - 读书笔记
tags:
 - 操作系统
---
# 开始
## 第一章 计算机系统漫游

这一章通过研究"hello, world"这个简单程序的生命周期, 介绍计算机系统的主要概念和主题

### 信息就是位(bit)+上下文

系统中的所有信息都是使用一串 **比特** 表示的, 而区分不同数据对象的唯一方法是根据我们读到这些数据对象时的上下文来判断

### 编译系统

以如下所示的 `hello.c` 程序为例, 观察其被翻译成可执行文件 `hello` 的过程
```c
#include <stdio.h>
int main()
{
printf("hello, world\n");
return O;
}
```

整个翻译过程可以被分为四个阶段
* 预处理阶段
* 编译阶段
* 汇编阶段
* 链接阶段

![](https://fishbun-blogimages.oss-cn-beijing.aliyuncs.com/blog_img/20200604095456.png)

#### 预处理阶段

预处理器(cpp)根据以`#`开头的指令, 修改原始的 C 程序. 即提取头文件中的内容并直接插入到程序文本中

#### 编译阶段

翻译成汇编指令

#### 汇编阶段

汇编器将汇编代码翻译成机器语言指令, 并把这些指令打包成一种叫做**可重定义目标程序**

#### 链接阶段

`helloworld`中调用了标准库中的`printf`函数, 链接阶段就负责将预编译好的`printf.o`文件合并到之前汇编阶段得到的文件中, 最终得到可执行文件`hello`

### 内核(kernel)的概念

内核不是一个独立的进程, 而是系统管理所有进程所用代码和数据结构的集合

### 线程

在现代系统中，一个进程可以由多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据

### 虚拟内存和虚拟地址空间

虚拟内存是一个抽象概念, 它制造了每个进程都在独占内存的假象

每个进程看到的内存都是一致的, 称为虚拟地址空间, 下图是 Linux 系统的虚拟地址空间

![](https://fishbun-blogimages.oss-cn-beijing.aliyuncs.com/blog_img/20200605135901.png)

# 第一部分 程序结构和运行

## 第二章 信息的表示和处理

### 小端法与大端法

小端法 : 最低有效字节在前面(地址较小)
大端法 : 最高有效字节在前面(地址较小)

![](https://fishbun-blogimages.oss-cn-beijing.aliyuncs.com/blog_img/20200605152049.png)

### 移位操作 逻辑右移与算数右移
逻辑右移补0, 而算数右移补最高有效位
![](https://fishbun-blogimages.oss-cn-beijing.aliyuncs.com/blog_img/20200606230532.png)

**补充**

在 C 语言中, 如果在移动 k 位时, k 的值很大会怎么样呢?

事实上, 在 C 语言中, 当移动一个 w 位的值时, 移位指令只考虑位移量的低$log_2w$位, 也就是说, 位移量是通过取模得到的, 因此得到的位移量不可能大于位数

testtest